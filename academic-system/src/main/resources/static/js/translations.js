// ========================================
// AUTOMATIC TRANSLATION SYSTEM
// No need to modify other JS files!
// ========================================

const translations = {
  en: {
    // Navigation
    Dashboard: 'Dashboard',
    Admins: 'Admins',
    'Academic Years': 'Academic Years',
    Courses: 'Courses',
    'Course Content': 'Course Content',
    Departments: 'Departments',
    Enrollments: 'Enrollments',
    Faculties: 'Faculties',
    Lecturers: 'Lecturers',
    Notifications: 'Notifications',
    Reports: 'Reports',
    Analytics: 'Analytics',
    Settings: 'Settings',
    Logout: 'Logout',

    // Page Titles
    'Admin Management': 'Admin Management',
    'Academic Years Management': 'Academic Years Management',
    'Course Management': 'Course Management',
    'Course Content Management': 'Course Content Management',
    'Department Management': 'Department Management',
    'Enrollment Management': 'Enrollment Management',
    'Faculty Management': 'Faculty Management',
    'Lecturer Management': 'Lecturer Management',
    'Notifications Management': 'Notifications Management',
    'Generate Reports': 'Generate Reports',
    'Analytics Dashboard': 'Analytics Dashboard',

    // Stats Labels
    'Total Admins': 'Total Admins',
    'Active Admins': 'Active Admins',
    'Total Departments': 'Total Departments',
    'Access Levels': 'Access Levels',
    'Total Academic Years': 'Total Academic Years',
    'Active Years': 'Active Years',
    'Current Year': 'Current Year',
    'Inactive Years': 'Inactive Years',
    'Total Courses': 'Total Courses',
    'Active Courses': 'Active Courses',
    Faculties: 'Faculties',
    'Total Credits': 'Total Credits',
    'Total Content': 'Total Content',
    Approved: 'Approved',
    Pending: 'Pending',
    'Total Size (MB)': 'Total Size (MB)',
    'Active Departments': 'Active Departments',
    'With Department Head': 'With Department Head',
    'Total Enrollments': 'Total Enrollments',
    Registered: 'Registered',
    Completed: 'Completed',
    'Total Lecturers': 'Total Lecturers',
    'By Department': 'By Department',
    'Total Courses': 'Total Courses',
    'By Qualification': 'By Qualification',
    'Total Notifications': 'Total Notifications',
    Read: 'Read',
    Unread: 'Unread',
    'High Priority': 'High Priority',

    // Buttons
    'Add Admin': 'Add Admin',
    'Add Academic Year': 'Add Academic Year',
    'Add Course': 'Add Course',
    'Add Content': 'Add Content',
    'Add Department': 'Add Department',
    'Add Enrollment': 'Add Enrollment',
    'Add Faculty': 'Add Faculty',
    'Add Lecturer': 'Add Lecturer',
    'Export PDF': 'Export PDF',
    'Export Excel': 'Export Excel',
    'Save Settings': 'Save Settings',
    'Send Notification': 'Send Notification',
    'Broadcast to All': 'Broadcast to All',
    'Download PDF': 'Download PDF',

    Parents: 'Parents',
    'Parents Management': 'Parents Management',
    'Total Parents': 'Total Parents',
    Fathers: 'Fathers',
    Mothers: 'Mothers',
    Guardians: 'Guardians',
    'Add Parent': 'Add Parent',
    'Parent Management': 'Parent Management',
    'Parents by Relationship': 'Parents by Relationship',
    'Parents by Occupation': 'Parents by Occupation',
    Relationship: 'Relationship',
    Occupation: 'Occupation',
    Address: 'Address',
    Children: 'Children',
    'All Relationships': 'All Relationships',
    Father: 'Father',
    Mother: 'Mother',
    Guardian: 'Guardian',
    Sponsor: 'Sponsor',

    // Table Headers
    'Employee ID': 'Employee ID',
    Name: 'Name',
    Email: 'Email',
    Department: 'Department',
    'Access Level': 'Access Level',
    'Hire Date': 'Hire Date',
    Status: 'Status',
    Actions: 'Actions',
    'Year Code': 'Year Code',
    Semester: 'Semester',
    'Start Date': 'Start Date',
    'End Date': 'End Date',
    'Registration Period': 'Registration Period',
    'Exam Period': 'Exam Period',
    Current: 'Current',
    'Course Code': 'Course Code',
    'Course Name': 'Course Name',
    Faculty: 'Faculty',
    Year: 'Year',
    Credits: 'Credits',
    Price: 'Price',
    'Max Students': 'Max Students',
    Title: 'Title',
    Course: 'Course',
    Lecturer: 'Lecturer',
    Type: 'Type',
    'File Name': 'File Name',
    Size: 'Size',
    Uploaded: 'Uploaded',
    Code: 'Code',
    Description: 'Description',
    'Department Head': 'Department Head',
    Created: 'Created',
    Dean: 'Dean',
    Student: 'Student',
    'Academic Year': 'Academic Year',
    Midterm: 'Midterm',
    Final: 'Final',
    Total: 'Total',
    Grade: 'Grade',
    Payment: 'Payment',
    Qualification: 'Qualification',
    Specialization: 'Specialization',
    Recipient: 'Recipient',
    Message: 'Message',
    Priority: 'Priority',

    // Status
    Active: 'Active',
    Inactive: 'Inactive',
    Paid: 'Paid',
    Unpaid: 'Unpaid',

    // Chart Titles
    'Admin Distribution': 'Admin Distribution',
    'Department Statistics': 'Department Statistics',
    'Years by Status': 'Years by Status',
    'Academic Years Timeline': 'Academic Years Timeline',
    'Courses by Faculty': 'Courses by Faculty',
    'Courses by Year': 'Courses by Year',
    'Content by Type': 'Content by Type',
    'Approval Status': 'Approval Status',
    'Departments by Faculty': 'Departments by Faculty',
    'Department Status': 'Department Status',
    'Enrollment by Status': 'Enrollment by Status',
    'Enrollments Timeline': 'Enrollments Timeline',
    'Faculty Status': 'Faculty Status',
    'Departments per Faculty': 'Departments per Faculty',
    'Lecturers by Department': 'Lecturers by Department',
    'Lecturers by Qualification': 'Lecturers by Qualification',
    'Access Level Distribution': 'Access Level Distribution',
    'Admin Activity': 'Admin Activity',
    'Department Comparison': 'Department Comparison',

    // Settings
    'API Configuration': 'API Configuration',
    'API Base URL': 'API Base URL',
    Appearance: 'Appearance',
    Theme: 'Theme',
    Light: 'Light',
    Dark: 'Dark',
    Language: 'Language',

    // Reports
    'Admin Summary Report': 'Admin Summary Report',
    'Department Report': 'Department Report',
    'Access Level Report': 'Access Level Report',
    'Custom Report': 'Custom Report',

    Timetable: 'Timetable',
    'Timetable Management': 'Timetable Management',
    'Total Schedules': 'Total Schedules',
    Lectures: 'Lectures',
    Labs: 'Labs',
    Tutorials: 'Tutorials',
    'Add Schedule': 'Add Schedule',
    'Classes by Day': 'Classes by Day',
    'Classes by Type': 'Classes by Type',
    Day: 'Day',
    Time: 'Time',
    Classroom: 'Classroom',
    Building: 'Building',
    'All Days': 'All Days',
    'All Types': 'All Types',
    Monday: 'Monday',
    Tuesday: 'Tuesday',
    Wednesday: 'Wednesday',
    Thursday: 'Thursday',
    Friday: 'Friday',
    Saturday: 'Saturday',
    Sunday: 'Sunday',
    Lecture: 'Lecture',
    Lab: 'Lab',
    Tutorial: 'Tutorial',

    // Common
    'All Notifications': 'All Notifications',
    'Search notifications...': 'Search notifications...',
    'All Types': 'All Types',
    'All Status': 'All Status',
    'All Priorities': 'All Priorities',
    'No notifications found': 'No notifications found',
    ID: 'ID',
    Statut: 'Status',
    English: 'English',
    Français: 'Français',

    Payments: 'Payments',
    'Payments Management': 'Payments Management',
    'Total Payments': 'Total Payments',
    Completed: 'Completed',
    Pending: 'Pending',
    'Total Revenue': 'Total Revenue',
    'Add Payment': 'Add Payment',
    'Payment Management': 'Payment Management',
    'Payments by Status': 'Payments by Status',
    'Payments by Method': 'Payments by Method',
    Student: 'Student',
    Amount: 'Amount',
    'Academic Year': 'Academic Year',
    Semester: 'Semester',
    Method: 'Method',
    Reference: 'Reference',
    Date: 'Date',
    'All Status': 'All Status',
    'All Methods': 'All Methods',
    Cash: 'Cash',
    'Bank Transfer': 'Bank Transfer',
    'Mobile Money': 'Mobile Money',
    'Credit Card': 'Credit Card',
    Cheque: 'Cheque',
    Failed: 'Failed',
    Refunded: 'Refunded',

    Students: 'Students',
    'Students Management': 'Students Management',
    'Total Students': 'Total Students',
    'By Faculty': 'By Faculty',
    'Average GPA': 'Average GPA',
    'High GPA (>3.5)': 'High GPA (>3.5)',
    'Add Student': 'Add Student',
    'Student Management': 'Student Management',
    'Students by Faculty': 'Students by Faculty',
    'Students by Year': 'Students by Year',
    'Student ID': 'Student ID',
    'Date of Birth': 'Date of Birth',
    Program: 'Program',
    GPA: 'GPA',
    Credits: 'Credits',
    Parent: 'Parent',
    'Enrollment Date': 'Enrollment Date',
    'All Faculties': 'All Faculties',
    'All Years': 'All Years',
    'All Semesters': 'All Semesters',
  },
  fr: {
    // Navigation
    Dashboard: 'Tableau de bord',
    Admins: 'Administrateurs',
    'Academic Years': 'Années académiques',
    Courses: 'Cours',
    'Course Content': 'Contenu des cours',
    Departments: 'Départements',
    Enrollments: 'Inscriptions',
    Faculties: 'Facultés',
    Lecturers: 'Enseignants',
    Notifications: 'Notifications',
    Reports: 'Rapports',
    Analytics: 'Analytique',
    Settings: 'Paramètres',
    Logout: 'Déconnexion',

    // Page Titles
    'Admin Management': 'Gestion des administrateurs',
    'Academic Years Management': 'Gestion des années académiques',
    'Course Management': 'Gestion des cours',
    'Course Content Management': 'Gestion du contenu des cours',
    'Department Management': 'Gestion des départements',
    'Enrollment Management': 'Gestion des inscriptions',
    'Faculty Management': 'Gestion des facultés',
    'Lecturer Management': 'Gestion des enseignants',
    'Notifications Management': 'Gestion des notifications',
    'Generate Reports': 'Générer des rapports',
    'Analytics Dashboard': 'Tableau de bord analytique',

    // Stats Labels
    'Total Admins': 'Total administrateurs',
    'Active Admins': 'Administrateurs actifs',
    'Total Departments': 'Total départements',
    'Access Levels': "Niveaux d'accès",
    'Total Academic Years': 'Total années académiques',
    'Active Years': 'Années actives',
    'Current Year': 'Année actuelle',
    'Inactive Years': 'Années inactives',
    'Total Courses': 'Total cours',
    'Active Courses': 'Cours actifs',
    Faculties: 'Facultés',
    'Total Credits': 'Total crédits',
    'Total Content': 'Contenu total',
    Approved: 'Approuvé',
    Pending: 'En attente',
    'Total Size (MB)': 'Taille totale (MB)',
    'Active Departments': 'Départements actifs',
    'With Department Head': 'Avec chef de département',
    'Total Enrollments': 'Total inscriptions',
    Registered: 'Inscrit',
    Completed: 'Complété',
    'Total Lecturers': 'Total enseignants',
    'By Department': 'Par département',
    'Total Courses': 'Total cours',
    'By Qualification': 'Par qualification',
    'Total Notifications': 'Total notifications',
    Read: 'Lu',
    Unread: 'Non lu',
    'High Priority': 'Priorité élevée',

    Payments: 'Paiements',
    'Payments Management': 'Gestion des paiements',
    'Total Payments': 'Total paiements',
    Completed: 'Complété',
    Pending: 'En attente',
    'Total Revenue': 'Revenu total',
    'Add Payment': 'Ajouter paiement',
    'Payment Management': 'Gestion des paiements',
    'Payments by Status': 'Paiements par statut',
    'Payments by Method': 'Paiements par méthode',
    Student: 'Étudiant',
    Amount: 'Montant',
    'Academic Year': 'Année académique',
    Semester: 'Semestre',
    Method: 'Méthode',
    Reference: 'Référence',
    Date: 'Date',
    'All Status': 'Tous les statuts',
    'All Methods': 'Toutes les méthodes',
    Cash: 'Espèces',
    'Bank Transfer': 'Virement bancaire',
    'Mobile Money': 'Argent mobile',
    'Credit Card': 'Carte de crédit',
    Cheque: 'Chèque',
    Failed: 'Échoué',
    Refunded: 'Remboursé',

    // Buttons
    'Add Admin': 'Ajouter administrateur',
    'Add Academic Year': 'Ajouter année académique',
    'Add Course': 'Ajouter cours',
    'Add Content': 'Ajouter contenu',
    'Add Department': 'Ajouter département',
    'Add Enrollment': 'Ajouter inscription',
    'Add Faculty': 'Ajouter faculté',
    'Add Lecturer': 'Ajouter enseignant',
    'Export PDF': 'Exporter PDF',
    'Export Excel': 'Exporter Excel',
    'Save Settings': 'Enregistrer paramètres',
    'Send Notification': 'Envoyer notification',
    'Broadcast to All': 'Diffuser à tous',
    'Download PDF': 'Télécharger PDF',

    // Table Headers
    'Employee ID': "ID de l'employé",
    Name: 'Nom',
    Email: 'Email',
    Department: 'Département',
    'Access Level': "Niveau d'accès",
    'Hire Date': "Date d'embauche",
    Status: 'Statut',
    Actions: 'Actions',
    'Year Code': "Code de l'année",
    Semester: 'Semestre',
    'Start Date': 'Date de début',
    'End Date': 'Date de fin',
    'Registration Period': "Période d'inscription",
    'Exam Period': "Période d'examen",
    Current: 'Actuel',
    'Course Code': 'Code du cours',
    'Course Name': 'Nom du cours',
    Faculty: 'Faculté',
    Year: 'Année',
    Credits: 'Crédits',
    Price: 'Prix',
    'Max Students': 'Max étudiants',
    Title: 'Titre',
    Course: 'Cours',
    Lecturer: 'Enseignant',
    Type: 'Type',
    'File Name': 'Nom du fichier',
    Size: 'Taille',
    Uploaded: 'Téléchargé',
    Code: 'Code',
    Description: 'Description',
    'Department Head': 'Chef de département',
    Created: 'Créé',
    Dean: 'Doyen',
    Student: 'Étudiant',
    'Academic Year': 'Année académique',
    Midterm: 'Mi-session',
    Final: 'Final',
    Total: 'Total',
    Grade: 'Note',
    Payment: 'Paiement',
    Qualification: 'Qualification',
    Specialization: 'Spécialisation',
    Recipient: 'Destinataire',
    Message: 'Message',
    Priority: 'Priorité',

    // Status
    Active: 'Actif',
    Inactive: 'Inactif',
    Paid: 'Payé',
    Unpaid: 'Non payé',

    // Chart Titles
    'Admin Distribution': 'Distribution des administrateurs',
    'Department Statistics': 'Statistiques des départements',
    'Years by Status': 'Années par statut',
    'Academic Years Timeline': 'Chronologie des années académiques',
    'Courses by Faculty': 'Cours par faculté',
    'Courses by Year': 'Cours par année',
    'Content by Type': 'Contenu par type',
    'Approval Status': "Statut d'approbation",
    'Departments by Faculty': 'Départements par faculté',
    'Department Status': 'Statut des départements',
    'Enrollment by Status': 'Inscriptions par statut',
    'Enrollments Timeline': 'Chronologie des inscriptions',
    'Faculty Status': 'Statut des facultés',
    'Departments per Faculty': 'Départements par faculté',
    'Lecturers by Department': 'Enseignants par département',
    'Lecturers by Qualification': 'Enseignants par qualification',
    'Access Level Distribution': "Distribution des niveaux d'accès",
    'Admin Activity': 'Activité des administrateurs',
    'Department Comparison': 'Comparaison des départements',

    // Settings
    'API Configuration': 'Configuration API',
    'API Base URL': 'URL de base API',
    Appearance: 'Apparence',
    Theme: 'Thème',
    Light: 'Clair',
    Dark: 'Sombre',
    Language: 'Langue',

    // Reports
    'Admin Summary Report': 'Rapport récapitulatif des administrateurs',
    'Department Report': 'Rapport des départements',
    'Access Level Report': "Rapport des niveaux d'accès",
    'Custom Report': 'Rapport personnalisé',

    Timetable: 'Emploi du temps',
    'Timetable Management': "Gestion de l'emploi du temps",
    'Total Schedules': 'Total horaires',
    Lectures: 'Cours magistraux',
    Labs: 'Travaux pratiques',
    Tutorials: 'Travaux dirigés',
    'Add Schedule': 'Ajouter horaire',
    'Classes by Day': 'Cours par jour',
    'Classes by Type': 'Cours par type',
    Day: 'Jour',
    Time: 'Heure',
    Classroom: 'Salle',
    Building: 'Bâtiment',
    'All Days': 'Tous les jours',
    'All Types': 'Tous les types',
    Monday: 'Lundi',
    Tuesday: 'Mardi',
    Wednesday: 'Mercredi',
    Thursday: 'Jeudi',
    Friday: 'Vendredi',
    Saturday: 'Samedi',
    Sunday: 'Dimanche',
    Lecture: 'Cours magistral',
    Lab: 'Travaux pratiques',
    Tutorial: 'Travaux dirigés',

    // Common
    'All Notifications': 'Toutes les notifications',
    'Search notifications...': 'Rechercher notifications...',
    'All Types': 'Tous les types',
    'All Status': 'Tous les statuts',
    'All Priorities': 'Toutes les priorités',
    'No notifications found': 'Aucune notification trouvée',
    ID: 'ID',
    Statut: 'Statut',
    English: 'English',
    Français: 'Français',

    Parents: 'Parents',
    'Parents Management': 'Gestion des parents',
    'Total Parents': 'Total parents',
    Fathers: 'Pères',
    Mothers: 'Mères',
    Guardians: 'Tuteurs',
    'Add Parent': 'Ajouter parent',
    'Parent Management': 'Gestion des parents',
    'Parents by Relationship': 'Parents par relation',
    'Parents by Occupation': 'Parents par profession',
    Relationship: 'Relation',
    Occupation: 'Profession',
    Address: 'Adresse',
    Children: 'Enfants',
    'All Relationships': 'Toutes les relations',
    Father: 'Père',
    Mother: 'Mère',
    Guardian: 'Tuteur',
    Sponsor: 'Sponsor',

    Students: 'Étudiants',
    'Students Management': 'Gestion des étudiants',
    'Total Students': 'Total étudiants',
    'By Faculty': 'Par faculté',
    'Average GPA': 'GPA moyen',
    'High GPA (>3.5)': 'GPA élevé (>3.5)',
    'Add Student': 'Ajouter étudiant',
    'Student Management': 'Gestion des étudiants',
    'Students by Faculty': 'Étudiants par faculté',
    'Students by Year': 'Étudiants par année',
    'Student ID': 'ID étudiant',
    'Date of Birth': 'Date de naissance',
    Program: 'Programme',
    GPA: 'GPA',
    Credits: 'Crédits',
    Parent: 'Parent',
    'Enrollment Date': "Date d'inscription",
    'All Faculties': 'Toutes les facultés',
    'All Years': 'Toutes les années',
    'All Semesters': 'Tous les semestres',
  },
};

// Current language
// Current language
currentLanguage = localStorage.getItem('language') || 'en';

// Translation function
function t(text) {
  if (!text) return text;
  const translated = translations[currentLanguage][text];
  return translated || text;
}

// Translate element
function translateElement(element) {
  // Skip script, style, and SVG elements
  if (['SCRIPT', 'STYLE', 'svg', 'path'].includes(element.tagName)) {
    return;
  }

  // Translate text nodes
  Array.from(element.childNodes).forEach((node) => {
    if (node.nodeType === Node.TEXT_NODE) {
      const text = node.textContent.trim();
      if (text && translations[currentLanguage][text]) {
        node.textContent = node.textContent.replace(
          text,
          translations[currentLanguage][text]
        );
      }
    }
  });

  // Translate placeholders
  if (element.placeholder) {
    element.placeholder = t(element.placeholder);
  }

  // Translate title attributes
  if (element.title) {
    element.title = t(element.title);
  }

  // Translate value for buttons
  if (element.tagName === 'BUTTON' && element.textContent) {
    const text = element.textContent.trim();
    if (translations[currentLanguage][text]) {
      element.textContent = translations[currentLanguage][text];
    }
  }
}

// Translate entire page
function translatePage() {
  // Translate all text content
  const elementsToTranslate = document.querySelectorAll(
    'h1, h2, h3, h4, h5, h6, p, span, label, button, th, td, a, .stat-label, .card-header, .nav-item .text'
  );

  elementsToTranslate.forEach((element) => {
    translateElement(element);
  });

  // Translate specific elements
  translateNavigation();
  translatePageTitle();
  translateButtons();
  translateTableHeaders();
  translateStatCards();
  translateChartTitles();
}

// Translate navigation
function translateNavigation() {
  document.querySelectorAll('.nav-item .text').forEach((el) => {
    const text = el.textContent.trim();
    if (translations[currentLanguage][text]) {
      el.textContent = translations[currentLanguage][text];
    }
  });

  const logoutText = document.querySelector('.logout-btn .text');
  if (logoutText) {
    logoutText.textContent = t('Logout');
  }
}

// Translate page title
function translatePageTitle() {
  const pageTitle = document.getElementById('pageTitle');
  if (pageTitle) {
    const text = pageTitle.textContent.trim();
    if (translations[currentLanguage][text]) {
      pageTitle.textContent = translations[currentLanguage][text];
    }
  }
}

// Translate buttons
function translateButtons() {
  document.querySelectorAll('button').forEach((button) => {
    // Get only the text content, not from child elements
    const textContent = Array.from(button.childNodes)
      .filter((node) => node.nodeType === Node.TEXT_NODE)
      .map((node) => node.textContent.trim())
      .join(' ')
      .trim();

    if (textContent && translations[currentLanguage][textContent]) {
      // Replace only the text nodes
      Array.from(button.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
          node.textContent = ' ' + translations[currentLanguage][textContent];
        }
      });
    }
  });
}

// Translate table headers
function translateTableHeaders() {
  document.querySelectorAll('th').forEach((th) => {
    const text = th.textContent.trim();
    if (translations[currentLanguage][text]) {
      th.textContent = translations[currentLanguage][text];
    }
  });
}

// Translate stat cards
function translateStatCards() {
  document.querySelectorAll('.stat-label').forEach((label) => {
    const text = label.textContent.trim();
    if (translations[currentLanguage][text]) {
      label.textContent = translations[currentLanguage][text];
    }
  });
}

// Translate chart titles
function translateChartTitles() {
  document.querySelectorAll('.card-header h3').forEach((title) => {
    const text = title.textContent.trim();
    if (translations[currentLanguage][text]) {
      title.textContent = translations[currentLanguage][text];
    }
  });
}

// Change language function
function changeLanguage(lang) {
  currentLanguage = lang;
  localStorage.setItem('language', lang);

  // Update active button
  document.querySelectorAll('.language-btn').forEach((btn) => {
    btn.classList.remove('active');
  });

  const activeBtn = document.getElementById(
    lang === 'en' ? 'englishBtn' : 'frenchBtn'
  );
  if (activeBtn) {
    activeBtn.classList.add('active');
  }

  // Translate the page
  translatePage();

  // Show notification
  if (typeof showNotification === 'function') {
    showNotification(
      lang === 'en'
        ? 'Language changed successfully'
        : 'Langue changée avec succès',
      'success'
    );
  }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function () {
  // Set initial language
  const savedLang = localStorage.getItem('language') || 'en';
  currentLanguage = savedLang;

  // Set active button
  const activeBtn = document.getElementById(
    savedLang === 'en' ? 'englishBtn' : 'frenchBtn'
  );
  if (activeBtn) {
    activeBtn.classList.add('active');
  }

  // Initial translation
  if (savedLang === 'fr') {
    setTimeout(() => translatePage(), 100);
  }
});

// Watch for dynamic content changes
const observer = new MutationObserver((mutations) => {
  if (currentLanguage === 'fr') {
    mutations.forEach((mutation) => {
      mutation.addedNodes.forEach((node) => {
        if (node.nodeType === Node.ELEMENT_NODE) {
          translateElement(node);
          node
            .querySelectorAll('*')
            .forEach((child) => translateElement(child));
        }
      });
    });
  }
});

// Start observing after page load
document.addEventListener('DOMContentLoaded', function () {
  observer.observe(document.body, {
    childList: true,
    subtree: true,
  });
});

// Export functions
window.changeLanguage = changeLanguage;
window.t = t;
window.translatePage = translatePage;
