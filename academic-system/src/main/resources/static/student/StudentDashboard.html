<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - UNT Academic System</title>
    <link rel="stylesheet" href="../css/StudentDashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
    <h1 id="pageTitle">Dashboard</h1>
    <div class="topbar-right">
        <button class="theme-toggle" id="themeToggle">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>

        <div class="notification-container">
            <button class="notification-toggle" id="notificationToggle">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span class="notification-badge" id="notificationBadge">0</span>
            </button>
        </div>
    </div>
</div>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="logo">
            <img src="../images/unt-logo.png" alt="UNT Logo" class="sidebar-logo">
            <span>Student Portal</span>
        </div>
        <button class="sidebar-toggle" id="sidebarToggle">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
    </div>





    <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="dashboard" onclick="navigateTo('dashboard')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
        </span>
            <span class="text">Dashboard</span>
        </a>

        <a href="#" class="nav-item" data-page="academic-years" onclick="navigateTo('academic-years')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        </span>
            <span class="text">Academic Years</span>
        </a>

        <a href="#" class="nav-item" data-page="courses" onclick="navigateTo('courses')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        </span>
            <span class="text">My Courses</span>
        </a>

        <a href="#" class="nav-item" data-page="available-courses" onclick="navigateTo('available-courses')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        </span>
            <span class="text">Enroll Courses</span>
        </a>

        <a href="#" class="nav-item" data-page="course-content" onclick="navigateTo('course-content')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
        </span>
            <span class="text">Course Content</span>
        </a>

        <a href="#" class="nav-item" data-page="timetable" onclick="navigateTo('timetable')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        </span>
            <span class="text">Timetable</span>
        </a>

        <a href="#" class="nav-item" data-page="departments" onclick="navigateTo('departments')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        </span>
            <span class="text">Departments</span>
        </a>

        <a href="#" class="nav-item" data-page="payments" onclick="navigateTo('payments')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                <line x1="1" y1="10" x2="23" y2="10"></line>
            </svg>
        </span>
            <span class="text">Payments</span>
        </a>

        <a href="#" class="nav-item" data-page="notifications" onclick="navigateTo('notifications')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
        </span>
            <span class="text">Notifications</span>
        </a>

        <a href="#" class="nav-item" data-page="parents" onclick="navigateTo('parents')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        </span>
            <span class="text">Parents Info</span>
        </a>

        <a href="#" class="nav-item" data-page="profile" onclick="navigateTo('profile')">
        <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        </span>
            <span class="text">My Profile</span>
        </a>
    </nav>


    <div class="sidebar-footer">
        <div class="user-profile">
            <div class="profile-avatar" id="userAvatar">L</div>
            <div class="profile-info">
                <div class="profile-name" id="userName">Loading...</div>
                <div class="profile-email" id="userEmail">student@unt.ro</div>
            </div>
        </div>
        <button class="logout-btn" id="logoutBtn">
            <span class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" y1="12" x2="9" y2="12"></line>
                </svg>
            </span>
            <span class="text">Logout</span>
        </button>
    </div>
</div>

<!-- LAYOUT WRAPPER -->
<div class="layout-wrapper">
    <!-- MAIN CONTENT AREA -->
    <div class="content-area" id="contentArea">

        <!-- Dashboard Section -->
        <section id="dashboard" class="page-content active">
            <div class="stats-grid" id="statsGrid">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading dashboard...</p>
                </div>
            </div>
        </section>

        <!-- Academic Years Section -->
        <section id="academic-years" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Academic Years</h2>
                </div>
                <div id="academicYearsContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading academic years...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Courses Section -->
        <section id="courses" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Enrolled Courses</h2>
                </div>
                <div id="coursesContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading your courses...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Available Courses Section -->
        <section id="available-courses" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Available Courses</h2>
                </div>
                <div id="availableCoursesContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading available courses...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Course Content Section -->
        <section id="course-content" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Course Materials</h2>
                </div>
                <div id="courseContentList" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading course materials...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timetable Section -->
        <section id="timetable" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Timetable</h2>
                    <button class="btn btn-primary" id="downloadTimetableBtn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                        </svg>
                        Download PDF
                    </button>
                </div>
                <div id="timetableContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading timetable...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Departments Section -->
        <section id="departments" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Departments</h2>
                </div>
                <div id="departmentsContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading departments...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Payments Section -->
        <section id="payments" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Payments</h2>
                    <button class="btn btn-primary" id="makePaymentBtn">Make Payment</button>
                </div>
                <div id="paymentsContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading payments...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Notifications Section -->
        <section id="notifications" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Notifications</h2>
                    <button class="btn btn-secondary" id="markAllReadBtn">Mark All Read</button>
                </div>
                <div id="notificationsContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading notifications...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Parents Section -->
        <section id="parents" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Parent Information</h2>
                </div>
                <div id="parentsContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading parent information...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="page-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">My Profile</h2>
                </div>
                <div id="profileContent" class="card-body">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading profile...</p>
                    </div>
                </div>
            </div>
        </section>

    </div>
</div>




<!-- Payment Modal -->
<div class="modal" id="paymentModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">üí≥ Make Payment</h3>
            <button class="modal-close" onclick="closePaymentModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="paymentForm">
                <!-- Payment Type -->
                <div class="form-group">
                    <label for="paymentType">Payment Type *</label>
                    <select id="paymentType" class="form-control" required>
                        <option value="">Select Payment Type</option>
                        <option value="TUITION">Tuition Fees</option>
                        <option value="COURSE_FEE">Course Fees</option>
                        <option value="REGISTRATION">Registration Fees</option>
                        <option value="LIBRARY">Library Fees</option>
                        <option value="EXAM">Exam Fees</option>
                        <option value="GRADUATION">Graduation Fees</option>
                        <option value="LATE_PAYMENT">Late Payment Fees</option>
                        <option value="OTHER">Other</option>
                    </select>
                </div>

                <!-- Academic Year (Read-Only Input) -->
                <div class="form-group">
                    <label for="paymentAcademicYear">
                        Academic Year *
                        <small style="color: #6b7280;">(Auto-filled from your profile)</small>
                    </label>
                    <input
                            type="text"
                            id="paymentAcademicYear"
                            class="form-control"
                            readonly
                            required
                            style="background: #f3f4f6; cursor: not-allowed; color: #374151; font-weight: 600;"
                            placeholder="Loading...">
                    <small style="display: block; margin-top: 4px; color: #6b7280; font-size: 0.875rem;">
                        üìå Your current academic year
                    </small>
                </div>

                <!-- Semester (Read-Only Input) -->
                <div class="form-group">
                    <label for="paymentSemester">
                        Semester *
                        <small style="color: #6b7280;">(Auto-filled from your profile)</small>
                    </label>
                    <input
                            type="text"
                            id="paymentSemester"
                            class="form-control"
                            readonly
                            required
                            style="background: #f3f4f6; cursor: not-allowed; color: #374151; font-weight: 600;"
                            placeholder="Loading...">
                    <small style="display: block; margin-top: 4px; color: #6b7280; font-size: 0.875rem;">
                        üìå Your current semester
                    </small>
                </div>

                <!-- Course (Optional - Dropdown) -->
                <div class="form-group">
                    <label for="paymentCourse">
                        Course (Optional)
                        <small style="color: #6b7280;">- Select for course-specific payment</small>
                    </label>
                    <select id="paymentCourse" class="form-control" onchange="onCourseSelectionChange()">
                        <option value="">Loading courses...</option>
                    </select>
                    <small style="display: block; margin-top: 4px; color: #6b7280; font-size: 0.875rem;">
                        üí° Select a course to auto-fill amount, or leave blank for general payment
                    </small>
                </div>

                <!-- Amount -->
                <div class="form-group">
                    <label for="paymentAmount">Amount (FCFA) *</label>
                    <input
                            type="number"
                            id="paymentAmount"
                            class="form-control"
                            required
                            min="1000"
                            step="100"
                            placeholder="Enter amount or select course">
                    <small style="display: block; margin-top: 4px; color: #6b7280; font-size: 0.875rem;">
                        üí∞ Minimum: 1,000 FCFA
                    </small>
                </div>

                <!-- Payment Method -->
                <div class="form-group">
                    <label for="paymentMethod">Payment Method *</label>
                    <select id="paymentMethod" class="form-control" required>
                        <option value="">Select Payment Method</option>
                        <option value="MOBILE_MONEY">üì± Mobile Money</option>
                        <option value="BANK_TRANSFER">üè¶ Bank Transfer</option>
                        <option value="CASH">üíµ Cash</option>
                        <option value="CREDIT_CARD">üí≥ Credit Card</option>
                        <option value="DEBIT_CARD">üí≥ Debit Card</option>
                        <option value="CHEQUE">üìù Cheque</option>
                    </select>
                </div>

                <!-- Transaction Reference (Auto-generated) -->
                <div class="form-group">
                    <label for="paymentReference">
                        Transaction Reference
                        <small style="color: #6b7280;">(Auto-generated)</small>
                    </label>
                    <input
                            type="text"
                            id="paymentReference"
                            class="form-control"
                            readonly
                            style="background: #f3f4f6; cursor: not-allowed; color: #6b7280; font-family: monospace;">
                    <small style="display: block; margin-top: 4px; color: #6b7280; font-size: 0.875rem;">
                        üîë Unique reference for tracking
                    </small>
                </div>

                <!-- Notes (Optional) -->
                <div class="form-group">
                    <label for="paymentNotes">Notes (Optional)</label>
                    <textarea
                            id="paymentNotes"
                            class="form-control"
                            rows="3"
                            placeholder="Add any additional notes..."></textarea>
                </div>

                <!-- Info Box -->
                <div style="background: #eff6ff; border-left: 4px solid #3b82f6; padding: 12px; border-radius: 4px; margin-top: 16px;">
                    <p style="margin: 0; color: #1e40af; font-size: 0.875rem;">
                        ‚ÑπÔ∏è <strong>Note:</strong> Payment will be PENDING until approved by admin.
                        Academic Year and Semester are read-only based on your profile.
                    </p>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closePaymentModal()">Cancel</button>
            <button class="btn btn-primary" onclick="submitPayment()">
                üí≥ Submit Payment
            </button>
        </div>
    </div>
</div>





<!-- Enroll Modal -->
<div class="modal" id="enrollModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Enroll in Course</h3>
            <button class="modal-close" onclick="closeEnrollModal()">&times;</button>
        </div>
        <div class="modal-body" id="enrollModalContent">
            <!-- Dynamic content will be loaded here -->
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeEnrollModal()">Cancel</button>
            <button class="btn btn-primary" onclick="confirmEnrollment()">Confirm Enrollment</button>
        </div>
    </div>
</div>

<!-- Mobile Menu Toggle (visible only on mobile) -->
<button class="mobile-menu-toggle" id="mobileMenuToggle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
</button>

<script src="../js/StudentDashboard.js"></script>
</body>
</html>